<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>å¿ƒç¯ï½œgenerator minimal test</title>
<style>
  body{font-family:system-ui,-apple-system,"Hiragino Sans","Yu Gothic",sans-serif;margin:0;background:#fafafa;color:#333}
  header{padding:16px 20px;border-bottom:1px solid #eee;background:#fff}
  main{max-width:900px;margin:24px auto;padding:0 16px}
  button{background:#8257e6;color:#fff;border:none;border-radius:10px;padding:.7em 1.2em;cursor:pointer}
  button:hover{background:#6d46d9}
  textarea{width:100%;height:360px;margin-top:12px;border:1px solid #ddd;border-radius:10px;padding:10px;font-family:ui-monospace,Menlo,Consolas,monospace}
  small{color:#666}
</style>
</head>
<body>
<header>
  <h1 style="margin:0">ğŸŒ™ å¿ƒç¯ï½œgenerator test</h1>
  <p style="margin:.25em 0 0">ãƒœã‚¿ãƒ³ãŒåå¿œã™ã‚‹ã‹ã ã‘ã‚’ã¾ãšç¢ºèªã—ã¾ã™ã€‚</p>
</header>

<main>
  <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
    <label>æ—¥ä»˜ï¼š<input type="date" id="dateInput"></label>
    <button id="genBtn">âœ¨ index.html ã‚’ç”Ÿæˆã—ã¦ã‚³ãƒ”ãƒ¼</button>
  </div>

  <textarea id="out" placeholder="ã“ã“ã«è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸHTMLãŒè¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>
  <small>â€» ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«å‡ºã¦ã€åŒæ™‚ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚</small>
</main>

<script>
(function init(){
  const t=new Date(), pad=n=>String(n).padStart(2,"0");
  document.getElementById("dateInput").value = `${t.getFullYear()}-${pad(t.getMonth()+1)}-${pad(t.getDate())}`;
})();

function buildHTML(dateStr){
  const d=dateStr? new Date(dateStr+"T00:00:00") : new Date();
  const w = ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"][d.getDay()];
  const today = `${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ${d.getDate()}æ—¥ï¼ˆ${w}ï¼‰`;
  // æœ€å°ã® index.htmlï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ï¼‰
  return `<!DOCTYPE html>
<html lang="ja">
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>å¿ƒç¯ï½œå®™ã®ãƒªã‚ºãƒ å ã„</title></head>
<body>
  <h1>å¿ƒç¯ï½œå®™ã®ãƒªã‚ºãƒ å ã„</h1>
  <p>æœ¬æ—¥ï¼š${today}</p>
  <div id="daily">ï¼ˆã“ã“ã«Gistã®ã€Œä»Šæ—¥ã®ç¯ã€ãŒå…¥ã‚Šã¾ã™ï¼‰</div>
</body>
</html>`;
}

function copy(text){
  const ta=document.createElement("textarea");
  ta.value=text; document.body.appendChild(ta);
  ta.select(); document.execCommand("copy");
  document.body.removeChild(ta);
}

document.getElementById("genBtn").addEventListener("click", ()=>{
  try{
    const dateStr=document.getElementById("dateInput").value;
    const html=buildHTML(dateStr);
    const out=document.getElementById("out");
    out.value = html;
    copy(html);
    alert("âœ… ç”Ÿæˆï¼†ã‚³ãƒ”ãƒ¼ã§ãã¾ã—ãŸï¼\nâ†’ ã“ã‚Œã‚’ index.html ã«å…¨è²¼ã‚Šæ›¿ãˆã™ã‚Œã°OKã§ã™ã€‚");
  }catch(e){
    console.error(e);
    alert("âŒ ä½•ã‹ã®ç†ç”±ã§ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸï¼ˆConsoleã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼‰");
  }
});
</script>
</body>
</html>
